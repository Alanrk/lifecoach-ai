<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, follow">
    <meta name="description" content="Language selection and redirection page">
    <title>Redirecting...</title>
    <script>
        function getUserLanguage() {
            // 1. 检查 localStorage
            const savedLang = localStorage.getItem('userLanguage');
            if (savedLang && ['zh', 'en'].includes(savedLang)) {
                return savedLang;
            }
            
            // 2. 检查浏览器语言
            const browserLang = navigator.language.toLowerCase().split('-')[0];
            return ['zh', 'en'].includes(browserLang) ? browserLang : 'en';
        }

        function redirect() {
            const lang = getUserLanguage();
            
            // 获取当前路径和文件名
            const path = window.location.pathname;
            const filename = path.substring(path.lastIndexOf('/') + 1) || 'index.html';
            
            // 使用相对路径构建目标URL
            const targetLang = lang === 'zh' ? 'zh-cn' : 'en';
            const targetUrl = `./${targetLang}/${filename}`;
            
            // 执行重定向
            window.location.href = targetUrl;
        }

        // 页面加载时执行重定向
        document.addEventListener('DOMContentLoaded', redirect);
    </script>
    <style>
        body {
            background: #f3f4f6;
        }
    </style>
</head>
<body>
</body>
</html>
