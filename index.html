<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, follow">
    <meta name="description" content="Language selection and redirection page">
    <title>Redirecting...</title>
    <script>
        function getUserLanguage() {
            // 1. 检查 localStorage
            const savedLang = localStorage.getItem('userLanguage');
            if (savedLang && ['zh', 'en'].includes(savedLang)) {
                return savedLang;
            }
            
            // 2. 检查浏览器语言
            const browserLang = navigator.language.toLowerCase().split('-')[0];
            return ['zh', 'en'].includes(browserLang) ? browserLang : 'en';
        }

        function redirect() {
            const lang = getUserLanguage();
            
            // 获取当前路径和文件名
            const path = window.location.pathname;
            const filename = path.substring(path.lastIndexOf('/') + 1) || 'index.html';
            
            // 使用相对路径构建目标URL
            const targetLang = lang === 'zh' ? 'zh-cn' : 'en';
            const targetUrl = `./${targetLang}/${filename}`;
            
            // 执行重定向
            window.location.href = targetUrl;
        }

        // 页面加载时执行重定向
        document.addEventListener('DOMContentLoaded', redirect);
    </script>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: #f3f4f6;
        }
        .loading {
            text-align: center;
            color: #4b5563;
        }
        .loading p {
            margin: 0.5em 0;
        }
    </style>
</head>
<body>
    <div class="loading">
        <p>页面加载中... / Loading...</p>
        <p style="font-size: 0.9em">正在跳转到适合您的语言版本 / Redirecting to your preferred language</p>
    </div>
</body>
</html>
